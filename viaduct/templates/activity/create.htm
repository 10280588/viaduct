{% from "macros/form.htm" import render_field, render_select %}

{% extends "content.htm" %}

{% block content %}

<script src='/static/js/throttle.js'></script>
<script src='/static/js/textarea.dev.js'></script>

<script src='/static/js/timepicker.js'></script>
<link href='/static/css/timepicker.css' rel='stylesheet'>

<h1>Activiteit</h1>

<form method="post" enctype="multipart/form-data">
        {{ form.csrf_token }}

        <div style="position:relative; margin-bottom:30px;">
            {{ render_select(form.form_id) }}
            <small style="position:absolute; top:60px; left:240px;">Je moet de pagina opnieuw laden voor resultaat.</small>

            <a style="position:absolute; top:24px; left:240px" class="show-window btn btn-success" target="_blank" href="http://{{ request.host }}/forms/create/">
                Formulier aanmaken
            </a>
        </div>

        {{ render_field(form.name, class="span6") }}
        {{ render_field(form.description, class="span6") }}

        <div class="control-group">
            <div class="controls">
                <div class="alert alert-info">
                    <b>Tip</b>
                    Selecteer een datum en tijd door op de klok te klikken
                </div>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">
                Start datum + tijd
            </label>

            <div class="controls form-inline">
                <input value="{{ form.start_time.data.strftime('%Y-%m-%d') }}" type='text' name='start_date' id='start_date' data-date-format="yyyy-mm-dd">

                <div class="input-append bootstrap-timepicker">
                    <input value="{{ form.start_time.data.strftime('%H:%M') }}" type='text' name='start_time' id="start_time" class="input-small">
                    <span class="add-on"><i class="icon-time"></i></span>
                </div>
            </div>
        </div>

        <div class="control-group">
            <label class="control-label">
                Eind datum + tijd
            </label>

            <div class="controls form-inline">
                <input value="{{ form.end_time.data.strftime('%Y-%m-%d') }}" type='text' name='end_date' id='end_date' data-date-format="yyyy-mm-dd">

                <div class="input-append bootstrap-timepicker">
                    <input value="{{ form.end_time.data.strftime('%H:%M') }}" type='text' name='end_time' id="end_time" class="input-small">
                    <span class="add-on"><i class="icon-time"></i></span>
                </div>
            </div>
        </div>

        {{ render_field(form.location) }}
        {{ render_field(form.price) }}

        {% if form.data.picture %}
            <p>Huidig plaatje:<br>
            <img src="/static/activity_pictures/{{ form.data.picture }}" style="height:200px;width:auto;">
        {% endif %}

        {{ render_field(form.picture) }}

    <div class="control-group">
        <div class="controls">
            <button type="submit" class="btn btn-primary">Opslaan</button>
        </div>
    </div>
</form>
{% if activity.id: %}
<form method="post" action="{{ url_for('activity.remove_activity', activity_id=activity.id) }}">
<button class="btn btn-danger " type="submit">Verwijder activiteit</button>
</form>
{% endif %}

<script src="/static/js/form.date.helper.js"></script>
{% endblock %}
